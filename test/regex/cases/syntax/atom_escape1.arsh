
source $SCRIPT_DIR/test_helper.arsh

# \
assert diff <(redump '\' '') <(<<'EOF'
1:1 [error] \ at end of pattern
 at (pos = 0, size = 1)
EOF
)

assert diff <(redump '2\' 'u') <(<<'EOF'
1:2 [error] \ at end of pattern
 at (pos = 1, size = 1)
EOF
)

assert diff <(redump '32\' 'v') <(<<'EOF'
1:3 [error] \ at end of pattern
 at (pos = 2, size = 1)
EOF
)

assert diff <(redump '\\' '') <(<<'EOF'
flag: (mode = , modifier = )
captureGroupCount: 0
namedCaptureGroups: []
pattern:
  kind: Char
  token: (pos = 0, size = 2)
  codePoint: U+005C, \
EOF
)

assert diff <(redump '\\' 'u') <(<<'EOF'
flag: (mode = u, modifier = )
captureGroupCount: 0
namedCaptureGroups: []
pattern:
  kind: Char
  token: (pos = 0, size = 2)
  codePoint: U+005C, \
EOF
)

assert diff <(redump '\\' 'v') <(<<'EOF'
flag: (mode = v, modifier = )
captureGroupCount: 0
namedCaptureGroups: []
pattern:
  kind: Char
  token: (pos = 0, size = 2)
  codePoint: U+005C, \
EOF
)

# \f
assert diff <(redump '\f' 'u') <(<<'EOF'
flag: (mode = u, modifier = )
captureGroupCount: 0
namedCaptureGroups: []
pattern:
  kind: Char
  token: (pos = 0, size = 2)
  codePoint: U+000C, \x0C
EOF
)

assert diff <(redump '\f' '') <(<<'EOF'
flag: (mode = , modifier = )
captureGroupCount: 0
namedCaptureGroups: []
pattern:
  kind: Char
  token: (pos = 0, size = 2)
  codePoint: U+000C, \x0C
EOF
)

# \n
assert diff <(redump '\n' '') <(<<'EOF'
flag: (mode = , modifier = )
captureGroupCount: 0
namedCaptureGroups: []
pattern:
  kind: Char
  token: (pos = 0, size = 2)
  codePoint: U+000A, \x0A
EOF
)

assert diff <(redump '\n' 'v') <(<<'EOF'
flag: (mode = v, modifier = )
captureGroupCount: 0
namedCaptureGroups: []
pattern:
  kind: Char
  token: (pos = 0, size = 2)
  codePoint: U+000A, \x0A
EOF
)

# \r
assert diff <(redump '\r' '') <(<<'EOF'
flag: (mode = , modifier = )
captureGroupCount: 0
namedCaptureGroups: []
pattern:
  kind: Char
  token: (pos = 0, size = 2)
  codePoint: U+000D, \x0D
EOF
)

assert diff <(redump '\r' 'v') <(<<'EOF'
flag: (mode = v, modifier = )
captureGroupCount: 0
namedCaptureGroups: []
pattern:
  kind: Char
  token: (pos = 0, size = 2)
  codePoint: U+000D, \x0D
EOF
)

# \t
assert diff <(redump '\t' '') <(<<'EOF'
flag: (mode = , modifier = )
captureGroupCount: 0
namedCaptureGroups: []
pattern:
  kind: Char
  token: (pos = 0, size = 2)
  codePoint: U+0009, \x09
EOF
)

assert diff <(redump '\t' 'u') <(<<'EOF'
flag: (mode = u, modifier = )
captureGroupCount: 0
namedCaptureGroups: []
pattern:
  kind: Char
  token: (pos = 0, size = 2)
  codePoint: U+0009, \x09
EOF
)

assert diff <(redump '\t' 'v') <(<<'EOF'
flag: (mode = v, modifier = )
captureGroupCount: 0
namedCaptureGroups: []
pattern:
  kind: Char
  token: (pos = 0, size = 2)
  codePoint: U+0009, \x09
EOF
)

# \v
assert diff <(redump '\v' '') <(<<'EOF'
flag: (mode = , modifier = )
captureGroupCount: 0
namedCaptureGroups: []
pattern:
  kind: Char
  token: (pos = 0, size = 2)
  codePoint: U+000B, \x0B
EOF
)

assert diff <(redump '\v' 'v') <(<<'EOF'
flag: (mode = v, modifier = )
captureGroupCount: 0
namedCaptureGroups: []
pattern:
  kind: Char
  token: (pos = 0, size = 2)
  codePoint: U+000B, \x0B
EOF
)

assert diff <(redump '\\v' 'v') <(<<'EOF'
flag: (mode = v, modifier = )
captureGroupCount: 0
namedCaptureGroups: []
pattern:
  kind: Seq
  token: (pos = 0, size = 3)
  patterns:
    - kind: Char
      token: (pos = 0, size = 2)
      codePoint: U+005C, \
    - kind: Char
      token: (pos = 2, size = 1)
      codePoint: U+0076, v
EOF
)