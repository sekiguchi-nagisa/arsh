#$test($result = 'exit', $lineNum = 12, $status = 1)

function raise($s : String) {
    /bin/kill -s ${$SIG.get($s)!.name()} $PID
}

function f($s : Signal) {
    throw $s
}

function g($s : Signal) {
    exit $s
}

$SIG['hup'].trap($f)

try {
    $raise('hup')
} catch $e {
    assert $e is Signal : "$e"
    assert ($e as Signal).name() == $SIG['hup'].name()
}

$SIG['hup'].trap($g)
$raise('hup')

exit 0
