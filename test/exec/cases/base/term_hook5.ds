
#$test($result = 'assert', $status = 1, $lineNum = 18, $out = $'receive error: 1\n')

function f() {
    var s = $?
    $SIGTERM.kill($$)    # disallow signal handler in termination hook
    true
    echo receive error: $s
}

function g($s : Signal) {
    echo receive signal
}

$TERM_HOOK = $f
$SIG['TERM'].trap($g)

assert false