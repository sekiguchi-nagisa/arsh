
source $SCRIPT_DIR/../module/completion

function _sudo($t : [String], $c : Int) : [String] {
    if $t.size() == 1 || $c == 1{
        import-env PATH : ""
        PATH=$PATH:/sbin:/usr/sbin:/usr/local/sbin complete &> /dev/null -A external ${$t.size() == 1 ? "" : $t.peek()}
        return $COMPREPLY
    } else {
        $t.shift()
        return $compDelegate($t, $c - 1)
    }
}

$compAdd("sudo", $_sudo)